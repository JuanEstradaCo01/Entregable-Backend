<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" /> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Document</title>
</head>
<body style="background-color: beige;">

    <header style="background-color: rgb(2, 136, 80);
                   font-size: 2rem;
                   height: 6rem;
                   display: flex;
                   justify-content: center;
                   align-items: center">
        <h2>ðŸŒ«My aplication SHOP</h2>
    </header>
    
    <hr>

    <div style="display: flex;
                justify-content: center;
                color: rgb(6, 185, 6);" 
         id="divh1Profile">
        <h1 class="headerPerfilh1">Perfil de usuario</h1>
    </div>
    
    <hr>
    
    <div style="display: flex; flex-direction: column;">
        <h2 style="margin-left: 1rem"><strong>Â¡Hola, {{username}}!</strong></h2>
        <div class="mr-5 d-grid gap-2 d-md-flex justify-content-md-end">
            <a href="/api/carts/{{cartId}}"><button id= "{{cartId}}" type="button" class="btn btn-outline-primary"><span class="material-symbols-outlined">shopping_cart</span></button></a>
        </div>
    </div>

    <hr>
    
    <div style="margin-left: 1rem" class="datosUser">
        <h4 class="titulo" style="color: rgb(207, 49, 10);"><strong>Datos del usuario</strong></h4>

        <div style="margin-left: 1rem;">
            <p class="parrafo"><strong>Nombre:</strong> {{username}}</p>
            <p class="parrafo"><strong>Apellido:</strong> {{lastname}}</p>
            <p class="parrafo"><strong>Email:</strong> {{email}}</p>
            <p class="parrafo"><strong>Edad:</strong> {{age}}</p>
            <p class="parrafo"><strong>Rol:</strong> {{rol}}</p>
            <p class="parrafo"><strong>Provider:</strong> {{provider}}</p>
        </div>     

        <form class="logout" action="/api/sessions/logout" method="POST">
            <button type="submit" class="btn btn-danger">Cerrar sesiÃ³n</button>
        </form>
    </div>
    

    <hr>

    <div style="margin-left: 2rem;">
        <a href="/chatLogin"><button id={{this._id}} type="button" class="btn btn-outline-success">Chat <span class="material-symbols-outlined">sms</span></button></a></body>
    </div>
    
    <h2 style="margin-top: 3rem;">Lista de productos de la tienda:</h2>
    
    <div style="display: flex;
                justify-content: center;
                align-items: center;
                margin: 2rem;
                text-align: center;"
                id="tablePaginate">
        <table style="border: 2.5px solid black; padding: 5rem;width: 95vh" class="tablePag">
            <thead>
                <tr>
                    <th  style="padding: .7rem;background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;"><strong>#</strong></th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;">ID</th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;">Producto</th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;">TamaÃ±o</th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;">Stock</th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;">Precio</th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;" class="none"></th>
                    <th  style="background-color: rgb(224, 224, 43);;border-bottom: 5px solid black;" class="none"></th>
                </tr>
            </thead>

            <tbody>
                {{#each products.docs}}
                <tr>
                    <td style="padding: .6rem;" class="center"><strong>{{this.id}}</strong></td>
                    <td class="center">{{this._id}}</td>
                    <td class="center">{{this.tittle}}</td>
                    <td class="center">{{this.description}}</td>
                    <td class="center">{{this.stock}}</td>
                    <td class="center">${{this.price}}</td>
                
                    <td class="none"><a href="/api/products/{{this._id}}"><button id= "{{this._id}}" type="button" class="btn btn-secondary">Detalle</button></a></td>

                    <td class="none"><form action="/api/carts/{{this.cartId}}/products/{{this._id}}" method="POST"><a ><button type="submit" class="btn btn-outline-warning" id="{{this._id}}">Agregar al carrito</button></a></form></td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <footer style="display: flex;flex-direction: row;justify-content: center;align-items: center;background-color: rgb(2, 136, 80);color: white;bottom: 0;width: 100%;height: 7rem;">
        <div style="display: flex;justify-content: center;align-items: center;">
            <div>
                <h3>ðŸŒ«My aplication</h3>
            </div>
            <p style="margin: 1rem;">Aplicacion creada por Juan Pablo Estrada (sin finalidad comercial)</p>
            <p style="margin: 1rem;">Todos los derechos reservados</p>
        </div>
    </footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>